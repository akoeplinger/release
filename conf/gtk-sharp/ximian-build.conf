<?xml version="1.0" ?>

<!DOCTYPE module SYSTEM "helix-build.dtd">

<module>
  <decl>
    <list id="default build deps">
      <i>glib2-devel</i>
      <i>gtk2-devel</i>
      <i>libart_lgpl-devel</i>
      <i>libglade2-devel</i>
      <i>libgnomecanvas-devel</i>
      <i>libgsf-devel</i>
      <i>libgnomeui-devel</i>
      <!-- Not all our distros support these
      <i>libgda-devel</i>
      <i>libgnomedb-devel</i> -->
      <i>mono-core</i>      
      <i>mono-devel</i>
      <i>pkgconfig</i>
      <i>vte-devel</i>
    </list>

    <list id="SuSE build deps">
      <i>libgnomeprint</i>      
      <i>libgnomeprint-devel</i>
      <i>libgnomeprintui</i>
      <i>libgnomeprintui-devel</i>
      <i>librsvg</i>      
      <i>librsvg-devel</i>
      <i>zlib-devel</i>
      <i>esound-devel</i>
      <i>popt-devel</i>        
    </list>
  </decl>

  <targetset>
    <filter>
      <i>.*</i>
    </filter>
    <name>gtk-sharp</name>

    <psdata id="copyright">LGPL</psdata>
    <psdata id="url">http://gtk-sharp.sf.net</psdata>
    <source>
      <!-- doesn't really work, just fools buildbuddy about where the tar is -->
      <i>SVN svn+ssh://mono-cvs.ximain.com/source/trunk</i>
    </source>

    <build id="default">
      <prepare>[[usrconfigure]] --enable-debug</prepare>
      <compile>${MAKE}</compile>
      <install>${MAKE} install DESTDIR=${DESTDIR}</install>

      <builddep id="buildrequires">

      </builddep>

      <package id="default">
        <name>gtk-sharp-complete</name>

        <psdata id="group">Development/Libraries</psdata>

	<dep id="requires">
          <i>art-sharp = [[fullversion]]</i>
          <i>gconf-sharp = [[fullversion]]</i>
          <i>glade-sharp = [[fullversion]]</i>
          <i>glib-sharp = [[fullversion]]</i>
          <i>gnome-sharp = [[fullversion]]</i>
          <i>gtk-sharp = [[fullversion]]</i>
          <i>gtk-sharp-gapi = [[fullversion]]</i>
          <i>gtkhtml-sharp = [[fullversion]]</i>
          <i>rsvg-sharp = [[fullversion]]</i>
          <i>vte-sharp = [[fullversion]]</i>
        </dep>

        <docs>
          <i>COPYING</i>
          <i>ChangeLog</i>
          <i>README</i>
        </docs>

<script id="find_provides">
           <i>
<![CDATA[
#!/bin/sh

filelist=`sed "s/['\"]/\\\&/g"`
 
{
    echo $filelist | tr [:blank:] \\n | /usr/lib/rpm/find-provides
    echo $filelist | tr [:blank:] \\n | /usr/bin/mono-find-provides
} | sort | uniq

]]>
           </i>
</script> 

<script id="find_requires">
           <i>
<![CDATA[
#!/bin/sh

filelist=`sed "s/['\"]/\\\&/g"`
 
{
    echo $filelist | tr [:blank:] \\n | /usr/lib/rpm/find-requires
    echo $filelist | tr [:blank:] \\n | /usr/bin/mono-find-requires
} | sort | uniq
]]>
           </i>           
</script>

        <description>
          <h>GTK+ and GNOME bindings for Mono (virtual package)</h>
          <p>
            This package provides a library that allows you to build
            fully native graphical GNOME applications using Mono. Gtk#
            is a binding to GTK+, the cross platform user interface
            toolkit used in GNOME. It includes bindings for Gtk, Atk,
            Pango, Gdk, libgnome, libgnomeui and libgnomecanvas. Gtk#
            1.x binds GTK+ 2.2.
            (Virtual package which depends on all gtk-sharp subpackages)
	  </p>
        </description>
      </package>

      <package id="gtk-sharp-gapi">
        <name>gtk-sharp-gapi</name>

        <psdata id="group">Development/Libraries</psdata>

        <files>
          <i>[[usrprefix]]/bin/gapi-codegen</i>
          <i>[[usrprefix]]/bin/gapi-fixup.exe</i>
          <i>[[usrprefix]]/bin/gapi-fixup</i>
          <i>[[usrprefix]]/bin/gapi-parser</i>
          <i>[[usrprefix]]/bin/gapi.pl</i>
          <i>[[usrprefix]]/bin/gapi2xml.pl</i>
          <i>[[usrprefix]]/bin/gapi_codegen.exe</i>
          <i>[[usrprefix]]/bin/gapi_format_xml</i>
          <i>[[usrprefix]]/bin/gapi_pp.pl</i>
          <i>[[usrlibdir]]/pkgconfig/gapi.pc</i>
          <i>[[usrprefix]]/share/gapi</i>
          <!-- <i>[[usrprefix]]/share/perl5/GAPI/Metadata.pm</i> -->
        </files>

        <dep id="requires">
          <i>perl-XML-LibXML-Common</i>
          <i>perl-XML-LibXML</i>
          <i>perl-XML-NamespaceSupport</i>
          <i>perl-XML-SAX</i>
          <!-- don't think this is needed 
	  <i>gtk-sharp = [[fullversion]]</i>
	  -->
        </dep>

        <description>
          <h>Glib and GObject C source parser and C generator for the creation and maintenance of managed bindings for Mono and .NET</h>
          <p>
            This package provides developer tools for the creation and
            maintainance of managed bindings to native libraries which utilize
            glib and GObject. Some examples of libraries currently bound using
            the GAPI tools and found in Gtk# include Gtk, Atk, Pango, Gdk,
            libgnome, libgnomeui and libgnomecanvas.
          </p>
        </description>
      </package>

      <package id="glade-sharp">
        <name>glade-sharp</name>

        <psdata id="group">Development/Libraries</psdata>

        <files>
          <i>[[usrprefix]]/lib/mono/gac/glade-sharp</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/glade-sharp.dll</i>

          <i>[[usrlibdir]]/libgladesharpglue.so</i>

          <i>[[usrlibdir]]/pkgconfig/glade-sharp.pc</i>
        </files>

        <description>
          <h>Mono bindings for glade</h>
          <p>
            This package contains Mono bindings for glade.
          </p>
        </description>
      </package>

     <package id="vte-sharp">
        <name>vte-sharp</name>

        <psdata id="group">Development/Libraries</psdata>

        <files>
          <i>[[usrprefix]]/lib/mono/gac/vte-sharp</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/vte-sharp.dll</i>

          <i>[[usrlibdir]]/pkgconfig/vte-sharp.pc</i>
        </files>

        <description>
          <h>Mono bindings for vte</h>
          <p>
            This package contains Mono bindings for vte.
          </p>
        </description>
      </package>

      <package id="glib-sharp">
        <name>glib-sharp</name>

        <psdata id="group">Development/Libraries</psdata>

        <files>
          <i>[[usrprefix]]/lib/mono/gac/glib-sharp</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/glib-sharp.dll</i>

          <i>[[usrlibdir]]/libglibsharpglue.so</i>

          <!-- <i>[[usrlibdir]]/pkgconfig/glib-sharp.pc</i> -->
        </files>

        <description>
          <h>Mono bindings for glib</h>
          <p>
            This package contains Mono bindings for glib.
          </p>
        </description>
      </package>

      <package id="gnome-sharp">
        <name>gnome-sharp</name>

        <psdata id="group">Development/Libraries</psdata>

        <files>
          <!-- Not all our distros support these
          <i>[[usrprefix]]/lib/mono/gac/gda-sharp</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/gda-sharp.dll</i>
          <i>[[usrprefix]]/lib/mono/gac/gnomedb-sharp</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/gnomedb-sharp.dll</i>
          <i>[[usrlibdir]]/pkgconfig/gda-sharp.pc</i>
          <i>[[usrlibdir]]/pkgconfig/gnomedb-sharp.pc</i> -->

          <i>[[usrprefix]]/lib/mono/gac/gnome-sharp</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/gnome-sharp.dll</i>

          <i>[[usrlibdir]]/libgnomesharpglue.so</i>

          <i>[[usrlibdir]]/pkgconfig/gnome-sharp.pc</i>
        </files>

        <description>
          <h>Mono bindings for gnome</h>
          <p>
            This package contains Mono bindings for gnome.
          </p>
        </description>
      </package>

      <package id="rsvg-sharp">
        <name>rsvg-sharp</name>

        <psdata id="group">Development/Libraries</psdata>

        <files>
          <i>[[usrprefix]]/lib/mono/gac/rsvg-sharp</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/rsvg-sharp.dll</i>

          <i>[[usrlibdir]]/pkgconfig/rsvg-sharp.pc</i>
        </files>

        <dep id="requires">
          <i>librsvg-2.so.2[[libmark]]</i>
        </dep>

        <description>
          <h>Mono bindings for various rsvg</h>
          <p>
            This package contains Mono bindings for rsvg.
          </p>
        </description>
      </package>

      <package id="gtkhtml-sharp">
        <name>gtkhtml-sharp</name>

        <psdata id="group">Development/Libraries</psdata>

        <files>
          <i>[[usrprefix]]/lib/mono/gac/gtkhtml-sharp</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/gtkhtml-sharp.dll</i>

          <i>[[usrlibdir]]/pkgconfig/gtkhtml-sharp.pc</i>
        </files>

        <dep id="requires">
          <i>libgtkhtml-[[gtkhtmlver]][[libmark]]</i>
        </dep>

        <description>
          <h>Mono bindings for gtkhtml</h>
          <p>
            This package contains Mono bindings for gtkhtml.
          </p>
        </description>
      </package>

      <package id="art-sharp">
        <name>art-sharp</name>

        <psdata id="group">Development/Libraries</psdata>

        <files>
          <i>[[usrprefix]]/lib/mono/gac/art-sharp</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/art-sharp.dll</i>

          <i>[[usrlibdir]]/pkgconfig/art-sharp.pc</i>
        </files>

        <dep id="requires">
          <i>libart_lgpl_2.so.2[[libmark]]</i>
        </dep>

        <description>
          <h>Mono bindings for libart</h>
          <p>
            This package contains Mono bindings for libart.
          </p>
        </description>
      </package>

      <package id="gtk-sharp">
        <name>gtk-sharp</name>

        <psdata id="group">Development/Libraries</psdata>

        <files>
          <i>[[usrprefix]]/lib/mono/gac/atk-sharp</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/atk-sharp.dll</i>

          <i>[[usrprefix]]/lib/mono/gac/gdk-sharp</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/gdk-sharp.dll</i>

          <i>[[usrprefix]]/lib/mono/gac/gtk-sharp</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/gtk-sharp.dll</i>

          <i>[[usrprefix]]/lib/mono/gac/pango-sharp</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/pango-sharp.dll</i>

          <i>[[usrlibdir]]/libgdksharpglue.so</i>
          <i>[[usrlibdir]]/libgtksharpglue.so</i>
          <i>[[usrlibdir]]/libpangosharpglue.so</i>

          <i>[[usrlibdir]]/pkgconfig/gtk-sharp.pc</i>
        </files>

        <description>
          <h>Mono bindings for gtk+</h>
          <p>
            This package contains Mono bindings for gtk+, gdk, atk, and pango.
          </p>
        </description>
      </package>

      <package id="gconf-sharp">
        <name>gconf-sharp</name>

        <psdata id="group">Development/Libraries</psdata>

        <files>
          <i>[[usrprefix]]/bin/gconfsharp-schemagen</i>
          <i>[[usrprefix]]/bin/gconfsharp-schemagen.exe</i>

          <i>[[usrprefix]]/lib/mono/gac/gconf-sharp</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/gconf-sharp.dll</i>

          <i>[[usrprefix]]/lib/mono/gac/gconf-sharp-peditors</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp/gconf-sharp-peditors.dll</i>

          <i>[[usrlibdir]]/pkgconfig/gconf-sharp.pc</i>
        </files>

        <description>
          <h>Mono bindings for gconf</h>
          <p>
            This package contains Mono bindings for gconf and gconf peditors.
          </p>
        </description>
      </package>







    </build>
  </targetset>

  <targetset>
    <filter>
      <i>redhat-9-</i>
    </filter>
    <decl>
      <macro id="gtkhtmlver">3.0.so.4</macro>
    </decl>
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <i>librsvg2-devel</i>
        <i>gtkhtml3.0-devel</i>
      </builddep>
    </build>
  </targetset>
  
 <targetset>
    <filter>
      <i>rhel-3..-</i>
    </filter>
    <decl>
      <macro id="gtkhtmlver">3.0.so.2</macro>
    </decl>
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <i>libgnomeprint22-devel</i>
        <i>libgnomeprintui22-devel</i>
        <i>gtkhtml3-devel</i>
        <i>librsvg2-devel</i>
      </builddep>
    </build>
  </targetset>
  
 <targetset>
    <filter>
      <i>rhel-4..-</i>
    </filter>
    <decl>
      <macro id="gtkhtmlver">3.1.so.11</macro>
    </decl>
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <i>libgnomeprint22-devel</i>
        <i>libgnomeprintui22-devel</i>
        <i>gtkhtml3-devel</i>
        <i>librsvg2-devel</i>
      </builddep>
    </build>
  </targetset>

 <targetset>
    <filter>
      <i>fedora-3-</i>
    </filter>
    <decl>
      <macro id="gtkhtmlver">3.1.so.11</macro>
    </decl>
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <i>librsvg2-devel</i>
        <i>gtkhtml3-devel</i>
        <i>libcroco-devel</i>
      </builddep>
    </build>
  </targetset>

 <targetset>
    <filter>
      <i>fedora-4-</i>
    </filter>
    <decl>
      <macro id="gtkhtmlver">3.6.so.18</macro>
    </decl>
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <i>librsvg2-devel</i>
        <i>gtkhtml3-devel</i>
        <i>libcroco-devel</i>
      </builddep>
    </build>
  </targetset>

 <targetset>
    <filter>
      <i>fedora-5-</i>
    </filter>

    <patch>
      <i>gtk-sharp-gtkhtml_suse100.patch-1</i>
    </patch>

    <decl>
      <macro id="gtkhtmlver">3.8.so.15</macro>
    </decl>
  </targetset>
  
  <targetset>
    <filter>
      <i>nld-9-</i>
      <i>suse-92-</i>
    </filter>
    <decl>
      <macro id="gtkhtmlver">3.1.so.11</macro>
    </decl>
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <l>SuSE build deps</l>
        <i>gtkhtml2-devel &lt; 3.3</i>
        <i>gnome-keyring-devel</i>
      </builddep>
    </build>
  </targetset>

  <targetset>
    <filter>
      <i>sles-9-</i>
    </filter>
    <decl>
      <macro id="gtkhtmlver">3.1.so.11</macro>
    </decl>
    <build id="default">
      <builddep id="buildrequires">
	<l>default build deps</l>
	<i>gtkhtml2-devel &lt; 3.3</i>
	<l>SuSE build deps</l>
      </builddep>
    </build>
  </targetset>

  <targetset>
    <filter>
    <i>suse-93-</i>
    </filter>
    
    <decl>
      <macro id="gtkhtmlver">3.6.so.18</macro>
    </decl>
    
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <l>SuSE build deps</l>
        <i>gtkhtml2-devel</i>
        <i>gnome-keyring-devel</i>
      </builddep>
    </build>
  </targetset>

  <targetset>
    <filter>
    <i>suse-100-</i>
    </filter>

    <patch>
      <i>gtk-sharp-gtkhtml_suse100.patch-1</i>
    </patch>
    
    <decl>
      <macro id="gtkhtmlver">3.8.so.15</macro>
    </decl>
    
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <l>SuSE build deps</l>
        <i>gtkhtml2-devel</i>
        <i>gnome-keyring-devel</i>
      </builddep>
    </build>
  </targetset>
  
  <targetset>
    <filter>
      <i>x86_64</i>
    </filter>
    
    <decl>
      <macro id="libmark">()(64bit)</macro>
    </decl>
  </targetset>
</module>

<!--
    Local Variables:
    mode: xml
    End:
  -->
