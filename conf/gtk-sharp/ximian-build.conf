<?xml version="1.0" ?>

<!DOCTYPE module SYSTEM "helix-build.dtd">

<module>
  <decl>
    <list id="default build deps">
      <i>glib2-devel</i>
      <i>gtk2-devel</i>
      <i>libart_lgpl-devel</i>
      <i>libglade2-devel</i>
      <i>libgnomecanvas-devel</i>
      <i>libgsf-devel</i>
      <i>libgnomeui-devel</i>
      <i>mono-core</i>      
      <i>mono-devel</i>
      <i>pkgconfig</i>
      <i>vte-devel</i>
    </list>

    <list id="SuSE build deps">
      <i>libgnomeprint</i>      
      <i>libgnomeprint-devel</i>
      <i>libgnomeprintui</i>
      <i>libgnomeprintui-devel</i>
      <i>librsvg</i>      
      <i>librsvg-devel</i>
      <i>zlib-devel</i>
      <i>esound-devel</i>
      <i>popt-devel</i>        
    </list>
  </decl>

  <targetset>
    <filter>
      <i>.*</i>
    </filter>
    <name>gtk-sharp</name>

    <psdata id="copyright">LGPL</psdata>
    <psdata id="url">http://gtk-sharp.sf.net</psdata>
    <source>
      <!-- doesn't really work, just fools buildbuddy about where the tar is -->
      <i>SVN svn+ssh://mono-cvs.ximain.com/source/trunk</i>
    </source>

    <build id="default">
      <prepare>[[usrconfigure]]</prepare>
      <compile>${MAKE}</compile>
      <install>${MAKE} install DESTDIR=${DESTDIR}</install>

      <builddep id="buildrequires">

      </builddep>

      <package id="default">
        <name>gtk-sharp</name>

        <psdata id="group">Development/Libraries</psdata>

        <files>
	  <i>[[usrlibdir]]/*.so</i>         
	  <i>[[usrprefix]]/bin/gconfsharp-schemagen.exe</i>
	  <i>[[usrprefix]]/bin/gconfsharp-schemagen</i>
          <i>[[usrprefix]]/lib/mono/gac</i>
          <i>[[usrprefix]]/lib/mono/gtk-sharp</i>
	  <i>[[usrlibdir]]/pkgconfig/*-sharp.pc</i>
        </files>

        <dep id="requires">
          <i>librsvg-2.so.2[[libmark]]</i>
          <i>libgtkhtml-[[gtkhtmlver]][[libmark]]</i>
        </dep>

        <docs>
          <i>COPYING</i>
          <i>ChangeLog</i>
          <i>README</i>
        </docs>

<script id="find_provides">
           <i>
<![CDATA[
#!/bin/sh

filelist=`sed "s/['\"]/\\\&/g"`
 
{
    echo $filelist | tr [:blank:] \\n | /usr/lib/rpm/find-provides
    echo $filelist | tr [:blank:] \\n | /usr/bin/mono-find-provides
} | sort | uniq

]]>
           </i>
</script> 

<script id="find_requires">
           <i>
<![CDATA[
#!/bin/sh

filelist=`sed "s/['\"]/\\\&/g"`
 
{
    echo $filelist | tr [:blank:] \\n | /usr/lib/rpm/find-requires
    echo $filelist | tr [:blank:] \\n | /usr/bin/mono-find-requires
} | sort | uniq
]]>
           </i>           
</script>

        <description>
          <h>GTK+ and GNOME bindings for Mono</h>
          <p>
            This package provides a library that allows you to build
            fully native graphical GNOME applications using Mono. Gtk#
            is a binding to GTK+, the cross platform user interface
            toolkit used in GNOME. It includes bindings for Gtk, Atk,
            Pango, Gdk, libgnome, libgnomeui and libgnomecanvas. Gtk#
            1.x binds GTK+ 2.2.
	  </p>
        </description>
      </package>

      <package id="gtk-sharp-gapi">
        <name>gtk-sharp-gapi</name>

        <psdata id="group">Development/Libraries</psdata>

        <files>
          <i>[[usrprefix]]/bin/gapi-codegen</i>
          <i>[[usrprefix]]/bin/gapi-fixup.exe</i>
          <i>[[usrprefix]]/bin/gapi-fixup</i>
          <i>[[usrprefix]]/bin/gapi-parser</i>
          <i>[[usrprefix]]/bin/gapi.pl</i>
          <i>[[usrprefix]]/bin/gapi2xml.pl</i>
          <i>[[usrprefix]]/bin/gapi_codegen.exe</i>
          <i>[[usrprefix]]/bin/gapi_format_xml</i>
          <i>[[usrprefix]]/bin/gapi_pp.pl</i>
          <i>[[usrlibdir]]/pkgconfig/gapi.pc</i>
          <i>[[usrprefix]]/share/gapi</i>
          <!-- <i>[[usrprefix]]/share/perl5/GAPI/Metadata.pm</i> -->
        </files>

        <dep id="requires">
          <i>perl-XML-LibXML-Common</i>
          <i>perl-XML-LibXML</i>
          <i>perl-XML-NamespaceSupport</i>
          <i>perl-XML-SAX</i>
          <i>gtk-sharp = [[fullversion]]</i>
        </dep>

        <description>
          <h>Glib and GObject C source parser and C generator for the creation and maintenance of managed bindings for Mono and .NET</h>
          <p>
            This package provides developer tools for the creation and
            maintainance of managed bindings to native libraries which utilize
            glib and GObject. Some examples of libraries currently bound using
            the GAPI tools and found in Gtk# include Gtk, Atk, Pango, Gdk,
            libgnome, libgnomeui and libgnomecanvas.
          </p>
        </description>
      </package>
    </build>
  </targetset>

  <targetset>
    <filter>
      <i>redhat-9-</i>
    </filter>
    <decl>
      <macro id="gtkhtmlver">3.0.so.4</macro>
    </decl>
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <i>librsvg2-devel</i>
        <i>gtkhtml3.0-devel</i>
      </builddep>
    </build>
  </targetset>
  
 <targetset>
    <filter>
      <i>rhel-3..-</i>
    </filter>
    <decl>
      <macro id="gtkhtmlver">3.0.so.2</macro>
    </decl>
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <i>libgnomeprint22-devel</i>
        <i>libgnomeprintui22-devel</i>
        <i>gtkhtml3-devel</i>
        <i>librsvg2-devel</i>
      </builddep>
    </build>
  </targetset>
  
 <targetset>
    <filter>
      <i>rhel-4..-</i>
    </filter>
    <decl>
      <macro id="gtkhtmlver">3.1.so.11</macro>
    </decl>
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <i>libgnomeprint22-devel</i>
        <i>libgnomeprintui22-devel</i>
        <i>gtkhtml3-devel</i>
        <i>librsvg2-devel</i>
      </builddep>
    </build>
  </targetset>

 <targetset>
    <filter>
      <i>fedora-3-</i>
    </filter>
    <decl>
      <macro id="gtkhtmlver">3.1.so.11</macro>
    </decl>
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <i>librsvg2-devel</i>
        <i>gtkhtml3-devel</i>
        <i>libcroco-devel</i>
      </builddep>
    </build>
  </targetset>
  
  <targetset>
    <filter>
      <i>nld-9-</i>
      <i>suse-92-</i>
    </filter>
    <decl>
      <macro id="gtkhtmlver">3.1.so.11</macro>
    </decl>
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <l>SuSE build deps</l>
        <i>gtkhtml2-devel &lt; 3.3</i>
        <i>gnome-keyring-devel</i>
      </builddep>
    </build>
  </targetset>

  <targetset>
    <filter>
      <i>sles-9-</i>
    </filter>
    <decl>
      <macro id="gtkhtmlver">3.1.so.11</macro>
    </decl>
    <build id="default">
      <builddep id="buildrequires">
	<l>default build deps</l>
	<i>gtkhtml2-devel &lt; 3.3</i>
	<l>SuSE build deps</l>
      </builddep>
    </build>
  </targetset>

  <targetset>
    <filter>
    <i>suse-93-</i>
    </filter>
    
    <decl>
      <macro id="gtkhtmlver">3.6.so.18</macro>
    </decl>
    
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <l>SuSE build deps</l>
        <i>gtkhtml2-devel</i>
        <i>gnome-keyring-devel</i>
      </builddep>
    </build>
  </targetset>

  <targetset>
    <filter>
    <i>suse-100-</i>
    </filter>

    <patch>
      <i>gtk-sharp-gtkhtml_suse100.patch-1</i>
    </patch>
    
    <decl>
      <macro id="gtkhtmlver">3.8.so.15</macro>
    </decl>
    
    <build id="default">
      <builddep id="buildrequires">
        <l>default build deps</l>
        <l>SuSE build deps</l>
        <i>gtkhtml2-devel</i>
        <i>gnome-keyring-devel</i>
      </builddep>
    </build>
  </targetset>
  
  <targetset>
    <filter>
      <i>x86_64</i>
    </filter>
    
    <decl>
      <macro id="libmark">()(64bit)</macro>
    </decl>
  </targetset>
</module>

<!--
    Local Variables:
    mode: xml
    End:
  -->
