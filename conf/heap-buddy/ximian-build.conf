<?xml version="1.0" ?>

<!DOCTYPE module SYSTEM "helix-build.dtd">

<module>
  <targetset>
    <filter>
      <i>.*</i>
    </filter>
    <name>heap-buddy</name>
    
    <psdata id="copyright">MPL/LGPL</psdata>
    <psdata id="url">http://go-mono.com</psdata>
    
    <source>
      <!-- doesn't really work, just fools buildbuddy about where the tar is -->
      <i>SVN svn+ssh://mono-cvs.ximain.com/source/trunk</i>
    </source>
    
    <builddep id="buildrequires">
      <i>mono-core</i>
      <i>gtk2-devel</i>
      <i>pkgconfig</i>
    </builddep>

    <build id="default">
      <prepare>[[usrconfigure]]</prepare>
      <compile>${MAKE}</compile>
      <install>[[usrinstall]]</install>

	<psdata id="buildarch">noarch</psdata>


      <package id="default">
        <name>heap-buddy</name>

        <psdata id="group">Development/Tools</psdata>
	
        <files>
          <i>[[usrlibdir]]/*</i>
          <i>[[usrprefix]]/lib/heap-buddy</i>
          <i>[[usrprefix]]/bin/*</i>
        </files>

        <docs />

        <!-- <dep id="requires">
          <i>mozilla</i>
        </dep> -->

<script id="find_provides">
           <i>
<![CDATA[
#!/bin/sh

filelist=`sed "s/['\"]/\\\&/g"`
 
{
    echo $filelist | tr [:blank:] \\n | /usr/lib/rpm/find-provides
    echo $filelist | tr [:blank:] \\n | /usr/bin/mono-find-provides
} | sort | uniq

]]>
           </i>
</script> 

<script id="find_requires">
           <i>
<![CDATA[
#!/bin/sh

filelist=`sed "s/['\"]/\\\&/g"`
 
{
    echo $filelist | tr [:blank:] \\n | /usr/lib/rpm/find-requires
    echo $filelist | tr [:blank:] \\n | /usr/bin/mono-find-requires
} | sort | uniq
]]>
           </i>           
</script>

        <description>
          <h>Heap profiler for mono</h>
          <p>
	    Heap-buddy is a heap profiler for mono. It attaches to 
	    special hooks in the mono runtime and tracks all of the 
	    managed memory allocations, every garbage collection and 
	    every heap resize. These statistics are written out into 
	    a data file that we call an 'outfile'.
	  </p>
        </description>
      </package>
    </build>
  </targetset>
</module>


<!--
    Local Variables:
    mode: xml
    End:
  -->
