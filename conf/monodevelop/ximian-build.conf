<?xml version="1.0" ?>

<!DOCTYPE module SYSTEM "helix-build.dtd">

<module>
  <targetset>
    <filter>
      <i>.*</i>
    </filter>
    <name>monodevelop</name>

    <psdata id="copyright">GPL</psdata>
    <psdata id="url">http://www.monodevelop.com</psdata>

    <source>
      <!-- doesn't really work, just fools buildbuddy about where the tar is -->
      <i>SVN svn+ssh://mono-cvs.ximain.com/svn/monodevelop/trunk</i>
    </source>

    <build id="default">

      <prepare>[[usrconfigure]] --enable-java --enable-boo --enable-subversion --enable-aspnet --disable-update-mimedb --disable-update-desktopdb</prepare>
      <!-- The compiler barfs unless this is set, which properly handles 'invisible char' in the source -->
      <compile>LANG=en_US.UTF-8 ${MAKE}</compile>
      <install>${MAKE} install DESTDIR=${DESTDIR}</install>
      
      <psdata id="buildarch">noarch</psdata>
      
      <builddep id="buildrequires">
        <i>pkgconfig</i>
        <i>gtksourceview-sharp2 &gt;= 0.8</i>
        <i>mono-devel &gt;= 1.1.6</i>
        <i>gecko-sharp2 &gt;= 0.8</i>
        <i>gtk-sharp2 &gt;= 1.9.3</i>
        <i>monodoc-core &gt;= 1.0.5</i>
	<i>gettext</i>
      </builddep>
      
      <script id="postinst">
        <i><![CDATA[
	update-mime-database /usr/share/mime &>/dev/null || :
	]]></i>
      </script>
      
      <script id="postun">
        <i><![CDATA[
	update-mime-database /usr/share/mime &>/dev/null || :
	]]></i>
      </script>
      
      <package id="default">
        <name>monodevelop</name>

        <psdata id="group">Development/Environment</psdata>

        <files>
          <i>[[usrprefix]]/bin/*</i>
          <i>[[usrprefix]]/lib/monodevelop</i>
          <i>[[usrprefix]]/lib/pkgconfig/monodevelop.pc</i>

          <i>[[usrprefix]]/share/locale/*/LC_MESSAGES/*</i>
          <i>[[usrprefix]]/share/applications/monodevelop.desktop</i>
          <i>[[usrprefix]]/share/pixmaps/monodevelop.png</i>
          <i>[[usrprefix]]/share/mime/packages/monodevelop.xml</i>
        </files>

        <docs>
          <i>AUTHORS</i>
          <i>COPYING</i>
          <i>ChangeLog</i>
          <i>INSTALL</i>
          <i>README</i>
        </docs>

<script id="find_provides">
           <i>
<![CDATA[
#!/bin/sh

filelist=`sed "s/['\"]/\\\&/g"`
 
{
    echo $filelist | tr [:blank:] \\n | /usr/lib/rpm/find-provides
    echo $filelist | tr [:blank:] \\n | /usr/bin/mono-find-provides
} | sort | uniq

]]>
           </i>
</script> 

<script id="find_requires">
           <i>
<![CDATA[
#!/bin/sh

filelist=`sed "s/['\"]/\\\&/g"`
 
{
    echo $filelist | tr [:blank:] \\n | /usr/lib/rpm/find-requires
    echo $filelist | tr [:blank:] \\n | /usr/bin/mono-find-requires
} | sort | uniq
]]>
           </i>           
</script>

        <dep id="requires">
          <i>pkgconfig</i>
          <i>ikvm</i>
          <i>mono-basic</i>
          <i>xsp</i>
        </dep>

        <description>
          <h>A full-featured IDE for Mono and Gtk#</h>
          <p>
	    This package provides MonoDevelop, a full-featured IDE for Mono
	    with syntax coloring, code completion, debugging, project
	    management and support for C#, Visual Basic.NET, Java, Boo,
	    Nemerle and MSIL.
	  </p>
        </description>

        <dep id="requires">
          <i>boo &gt;= 0.7.6.2237</i>
        </dep>
      </package>
    </build>
  </targetset>
</module>


<!--
    Local Variables:
    mode: xml
    End:
  -->
