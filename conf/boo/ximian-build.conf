<?xml version="1.0" ?>

<!DOCTYPE module SYSTEM "helix-build.dtd">

<module>
  <targetset>
    <filter>
      <i>.*</i>
    </filter>
    <name>boo</name>

    <psdata id="copyright">MIT</psdata>
    <psdata id="url">http://boo.codehaus.org</psdata>

    <source>
      <!-- doesn't really work, just fools buildbuddy about where the tar is -->
      <i>SVN svn+ssh://mono-cvs.ximain.com/source/trunk</i>
    </source>
        
    <build id="default">
      <prepare>true</prepare>
      <compile>nant -D:install.prefix=[[usrprefix]]</compile>
      <install><![CDATA[
nant install -D:install.prefix=[[usrprefix]] -D:install.destdir=${DESTDIR}

# noarch hack...
cd ${DESTDIR}
mkdir -p opt/gnome/share/gtksourceview-1.0/language-specs
cp .[[usrprefix]]/share/gtksourceview-1.0/language-specs/boo.lang opt/gnome/share/gtksourceview-1.0/language-specs
]]>
      </install>

      <psdata id="buildarch">noarch</psdata>

      <builddep id="buildrequires">
        <i>mono-devel</i>
      </builddep>
      
      <script id="postinst">
        <i><![CDATA[
	update-mime-database [[usrprefix]]/share/mime &>/dev/null || :
	]]></i>
      </script>
      
      <script id="postun">
        <i><![CDATA[
	update-mime-database [[usrprefix]]/share/mime &>/dev/null || :
	]]></i>
      </script>
      
      <package id="default">
        <name>boo</name>

        <psdata id="group">Development</psdata>

        <files>
		<i>[[usrprefix]]/lib/boo</i>
		<i>[[usrprefix]]/lib/mono/boo</i>
		<i>[[usrprefix]]/lib/mono/gac</i>
		<i>[[usrprefix]]/lib/pkgconfig/*.pc</i>
		<i>[[usrprefix]]/bin/*</i>
		<!-- complete and total hack to make this noarch. -->
		<i>[[usrprefix]]/share/gtksourceview-1.0/language-specs/boo.lang</i>
		<i>/opt/gnome/share/gtksourceview-1.0/language-specs/boo.lang</i>
		<i>[[usrprefix]]/share/mime/packages/boo-mime-info.xml</i>
		<i>[[usrprefix]]/share/mime-info/boo.mime</i>
		<i>[[usrprefix]]/share/mime-info/boo.keys</i>
        </files>

        <docs />

<script id="find_provides">
           <i>
<![CDATA[
#!/bin/sh

filelist=`sed "s/['\"]/\\\&/g"`
 
{
    echo $filelist | tr [:blank:] \\n | /usr/lib/rpm/find-provides
    echo $filelist | tr [:blank:] \\n | /usr/bin/mono-find-provides
} | sort | uniq

]]>
           </i>
</script> 

<script id="find_requires">
           <i>
<![CDATA[
#!/bin/sh

filelist=`sed "s/['\"]/\\\&/g"`
 
{
    echo $filelist | tr [:blank:] \\n | /usr/lib/rpm/find-requires
    echo $filelist | tr [:blank:] \\n | /usr/bin/mono-find-requires
} | sort | uniq
]]>
           </i>           
</script>

        <description>
          <h>A CLI scripting language</h>
          <p>Boo is a new object oriented statically typed programming language for the Common Language Infrastructure
	  with a python inspired syntax and a special focus on language and compiler extensibility.</p>
        </description>
      </package>
    </build>
  </targetset>
</module>


<!--
    Local Variables:
    mode: xml
    End:
  -->
