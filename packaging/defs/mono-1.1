# Possibly use sles-8 as the new base distro?
BUILD_HOSTS=(
	redhat-9-i386
	sles-9-x86_64
	sles-9-ia64
	sunos-8-sparc
	win-4-i386
)

USE_HOSTS=(
	fedora-3-i386
	fedora-4-i386
	fedora-4-x86_64
	nld-9-i586
	nld-9-x86_64
	redhat-9-i386
	rhel-3-i386
	rhel-4-i386
	sles-9-i586
	sles-9-ia64
	sles-9-s390
	sles-9-s390x
	sles-9-x86_64
	suse-92-i586
	suse-93-i586
	suse-93-x86_64
	suse-100-i586
	suse-100-x86_64
	win-4-i386
)

# Having this ensures that the wrong mono isn't in the jail
#  (Or that mono is present for the snapshot builds)
MONO_DEPS=(
	mono-1.1
)


## format: <$DISTRO>_ZIP_DEPS
# Note: $DISTRO must have the hyphens converted to underscores
win_4_i386_ZIP_DEPS=(
	ftp://ftp.gtk.org/pub/gtk/v2.6/win32/glib-2.6.6.zip
	ftp://ftp.gtk.org/pub/gtk/v2.6/win32/glib-dev-2.6.6.zip
	http://www.gimp.org/~tml/gimp/win32/pkgconfig-0.15.zip
	http://www.gimp.org/~tml/gimp/win32/libiconv-1.9.1.bin.woe32.zip
	http://www.gimp.org/~tml/gimp/win32/gettext-0.14.5.zip
	http://www.gimp.org/~tml/gimp/win32/gettext-dev-0.14.5.zip

	# Old library
	#http://www.gimp.org/~tml/gimp/win32/gettext-runtime-0.13.1.zip
)

# Need to get these in zip format... guess I gotta build them myself
#  These first 4 are packages I've built
sunos_8_sparc_ZIP_DEPS=(
#	http://primates.ximian.com/~wberrier/sunos/gettext-0.14.5-0.sunos8.novell.sparc.zip
#	http://primates.ximian.com/~wberrier/sunos/libiconv-1.9.1-0.sunos8.novell.sparc.zip
#	http://primates.ximian.com/~wberrier/sunos/glib-2.8.3-0.sunos8.novell.sparc.zip
#	http://primates.ximian.com/~wberrier/sunos/pkg-config-0.20-0.sunos8.novell.sparc.zip
#
#	# Repackaged
#	http://primates.ximian.com/~wberrier/sunos/libgcc-3.3-0.sunos8.novell.sparc.zip
#
#	# Repack these
#	#ftp://sunfreeware.nssl.noaa.gov/pub/freeware/sparc/5.8/libgcc-3.3-sol8-sparc-local.gz
#
#
#	ftp://sunfreeware.nssl.noaa.gov/pub/freeware/sparc/8/expat-1.95.5-sol8-sparc-local.gz
#	ftp://sunfreeware.nssl.noaa.gov/pub/freeware/sparc/8/glib-2.6.2-sol8-sparc-local.gz
#
#	# Build my own newer versions
#	ftp://sunfreeware.nssl.noaa.gov/pub/freeware/sparc/5.8/libiconv-1.8-sol8-sparc-local.gz
#	# This comes with gettext
#	ftp://sunfreeware.nssl.noaa.gov/pub/freeware/sparc/8/libintl-3.4.0-sol8-sparc-local.gz 
#	ftp://sunfreeware.nssl.noaa.gov/pub/freeware/sparc/8/gettext-0.14.1-sol8-sparc-local.gz
#	ftp://sunfreeware.nssl.noaa.gov/pub/freeware/sparc/5.8/pkgconfig-0.15.0-sol8-sparc-local.gz
)

sunos_8_sparc_ZIP_BUILD () {
	# Bison fails without the M4 var (tries to use /usr/ccs/bin/m4 instead otherwise)

	# Only if a non-gnu m4 is in the path
	export M4=/usr/local/bin/m4

	# Do this to make sure libgcc is found.  Won't be needed when we install libgcc into build_deps
	export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH

	./configure --prefix=/tmp/install
	make || exit 1
	make install-strip || exit 1
}

win_4_i386_ZIP_BUILD () {

	# Only needed for boot strapping
	#export PATH=$PATH:/cygdrive/c/mono/Mono-1.1.8.3/bin

	./configure --prefix=/tmp/install

	# Hacks to get it to build 

	make || exit 1
	#make check
	make install || exit 1

	cd /tmp/install/bin
	strip --strip-unneeded *.dll *.exe

	cd /tmp/install/lib
	strip --strip-unneeded *.a


}

get_destroot () {
	# rh9 rpms can't be used on sles-8-i386
	if [ $DISTRO == "sles-8-i386" ] ; then
		DEST_ROOT=$DISTRO
	elif [ x$USE_ZIP_PKG != x ] ; then
		DEST_ROOT=$DISTRO
	else
		DEST_ROOT=$ARCH
	fi
}

HEAD_PATH="trunk"
RELEASE_PATH="tags/mono-[[version]]"

get_tarball () {
	msvn_tar $1
}

