How to upload the packages
==========================

Part A: Uploading to the web site

1) Connect to mono-web@go-mono.com.

2) There's a script called make-directories to create the new
   skeleton.

   To based a 1.x release from the 1.0 tarball, run the follow from
   the "archive" directory.

      make-directories 1.0 1.x

   This assumes that "1.0" and "1.x" are both a child directory of
   "archive".

3) Copy everything to the 1.x directory from the NFS deploy directory:

   scp -R /nfs/$USER/deploy/1.x/ mono-web@go-mono.com:go-mono/archive/1.x/

  This copies all the new files into 1.x, with all new the RPMS
  landing in the correct subdirectory containing the packages from the
  previous release.

4) For each of the subdirectories containing the packages for each
   distribution, remove those that will be replaced by the new
   packages. There should be a script for doing this, but it hasn't
   been written yet.

5) Inspect the subdirectories again, making sure everything is in
   place. Check to make sure the serial numbers are the consistent
   (i.e. you didn't copy packages for the FOO distribution to the BAR
   directory)

   For Fedora packages, run "yum-arch ." from the subdirectory with
   all the RPMs to generate the headers directory and other
   YUM-related stuff.

6) Run "update-all" from the "1.x" directory. It's call "update-zip"
   to create the "mono-all.zip" files, and call "update-page" to
   generate the index page for each distribution. Be sure to update
   "template.html" to reflect the updated version number.

7) Go to "archive/yum-repository" and update the symbolic links
   to point to the latest Fedora release directory.


Part B: Uploading to Red Carpet

1) You'll need access to connect to "distro@pipeline".

2) Go to the deployment directory on NFS.

3) Assuming that the directory is laid out as described, run:

<shell-script>
   for i in *; do
       rel-add-packages -c mono -t $i -d "A Brief message here" $i/*.rpm;
   done
</shell-script>

   Where $i is the target, or the name of the distribution.

   We currently support the following distributions:

      redhat-9-i386, fedora-1-i386, fedora-2-i386, suse-90-i586,
      suse-91-i586, sles-8-i386

4) Once that is completed, call "rel-stage-to-real mono"

5) After that, "rel-push".